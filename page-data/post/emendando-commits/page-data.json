{"componentChunkName":"component---src-templates-post-article-index-js","path":"/post/emendando-commits/","result":{"data":{"markdownRemark":{"html":"<p>Utilizar <a href=\"https://git-scm.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Git</a> para versionamento de código (e até de outros arquivos) é uma tarefa corriqueira para grande maioria dos desenvolvedores.</p>\n<p>É comum utilizarmos no nosso dia-a-dia uma vasta quantidade de comandos no terminal e muito provavelmente você já tem os seus favoritos. Dos que utilizamos com git, muito provavelmente você já está acostumado com:</p>\n<ul>\n<li><code class=\"language-text\">git add [caminho-do-arquivo]</code> ou <code class=\"language-text\">git add .</code>: para adicionar arquivos para sua <code class=\"language-text\">stage area</code>, para serem \"commitados\" futuramente;</li>\n<li><code class=\"language-text\">git commit -m</code>: para commitar os arquivos existentes na <code class=\"language-text\">stage area</code> com uma mensagem específica;</li>\n<li><code class=\"language-text\">git checkout</code> (ou os novos <code class=\"language-text\">git restore</code> e <code class=\"language-text\">git switch</code>, respectivamente): para remover arquivos alterados ou mudar de branch;</li>\n<li>fora os mais corriqueiros como <code class=\"language-text\">git pull</code> e <code class=\"language-text\">git push</code>: para baixar alterações de um repositório remoto ou subir novas alterações para eles.</li>\n</ul>\n<p>Acontece que, existem alguns outros comandos (e outras opções para comandos que já conhecemos) que podem nos auxiliar bastante diariamente na tarefa de versionar nosso código de uma forma limpa, e são alguns desses comandos que venho comentar.</p>\n<p>Para exemplificar melhor, vou atrelar cada um dos comandos a um cenário específico. Acredito que dessa forma fique mais simples de lembrar essas utilizações.</p>\n<p>Espero que com eles você consiga evitar novos commits desnecessários ou com alterações que não refletem alguma inserção significativamente histórica no seu projeto</p>\n<hr>\n<h4>Acabei de realizar meus commits, mas percebi que esqueci de remover algumas linhas (talvez aquele <code class=\"language-text\">debugger;</code> ou algum <code class=\"language-text\">console.log</code>)</h4>\n<p>Nesse cenário, uma boa pedida seria o <code class=\"language-text\">git commit --amend</code>.\nApós realizar um <code class=\"language-text\">git add</code> nesses arquivos e fazer as alterações que você esqueceu, você não precisa, necessariamente, escrever um novo commit apenas para remover essas linhas que acabaram sendo deixadas.</p>\n<p>Com esse comando você \"emenda\" essas alterações no seu commit anterior.</p>\n<p><strong>Mas vale lembrar que:</strong> esse comando reescreve o commit anterior e insere esse novo arquivo (e te possibilita alterar a mensagem do commit também). Por consequência, o <code class=\"language-text\">hash</code> (aquele código único gerado) desse commit também é alterado. Isso significa que, se você já fez o <code class=\"language-text\">push</code> desses commits, precisará forçar o próximo <code class=\"language-text\">push</code> (com a opção <code class=\"language-text\">-f</code>, <code class=\"language-text\">--force</code> ou <code class=\"language-text\">--force-with-lease</code>).</p>\n<p>Por isso, talvez não seja um comando tão interessante para utilizar quando estiver trabalhando em conjunto com outra pessoa numa mesma branch.</p>\n<h4>Acabei de criar uma branch quero deixar um PR aberto, ou preciso \"forçar\" o CI a rodar as verificações em um PR já existente</h4>\n<p>Muito provavelmente nesse caso você já está acostumado a criar um commmit \"sem nada\". Ou seja, alterar alguma linha de um arquivo <code class=\"language-text\">README.md</code> ou mudar algo no <code class=\"language-text\">package.json</code> do projeto apenas para criar um novo commit e poder abrir um PR ou fazer com que o CI rode novamente na sua branch no seu repositório remoto.</p>\n<p>Para esse cenário, existe uma outra opção: <code class=\"language-text\">git commit --allow-empty -m &#39;mensagem&#39;</code>.\nEsse comando faz exatamente o que a a opção sugere: ele cria um commit vazio, com uma mensagem especificada por você.</p>\n<p>O que já resolve essa necessidade de realizar alterações simples manualmente só para gerar um novo commit na sua branch.</p>\n<h4>Criei alguns arquivos/pastas mas, após algumas definições e desenvolvimento, percebi que não preciso mais deles</h4>\n<p>Talvez você utilize, nesses casos, os comandos de <code class=\"language-text\">rm</code> para remover os arquivos e pastas manualmente. Como são novos na sua branch não será possível removê-los com <code class=\"language-text\">git checkout</code> (ou <code class=\"language-text\">git restore</code>).</p>\n<p>Para esse caso, um comando que ajuda bastante é o <code class=\"language-text\">git clean</code>.\nCom algumas opções, esse comando permite que você apague esses arquivos e pastas sem ter que ficar manualmente excluindo eles.</p>\n<hr>\n<h3>Bônus</h3>\n<h4>Configurando <code class=\"language-text\">alias</code> para comandos customizados</h4>\n<p>Se você já possui seus arquivos configurados e um setup automatizado (talvez seguindo algumas práticas de <a href=\"https://gabrieluizramos.com.br/post/configure-seus-dotfiles/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dotfiles</a>, como costumo <a href=\"https://github.com/gabrieluizramos/dotfiles\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">deixar os meus</a>), talvez já conheça essa \"técnica\". Mas você consegue, no seu arquivo <code class=\"language-text\">.gitconfig</code>, configurar e customizar alguns <code class=\"language-text\">aliases</code> como se fossem comandos padrões do git, só que seguindo suas necessidades.</p>\n<p>Para configurá-los, basta colocar a chave <code class=\"language-text\">[alias]</code> no seu <code class=\"language-text\">.gitconfig</code> e escrever seus comandos como:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[alias]\n  opcao = comando</code></pre></div>\n<p>Dessa forma, ao utilizar git, o comando <code class=\"language-text\">git opcao</code> estaria configurada e pronta para utilização.</p>\n<p>Eu costumo utilizar <a href=\"https://github.com/gabrieluizramos/dotfiles/blob/master/.dotfiles/symlinks/.gitconfig#L17\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">as seguintes configurações</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[alias]\n  # Last commit&#39;s diff\n  last = diff HEAD^ HEAD\n  # Clean file and folders\n  clear = clean -fd\n  # Get current branch name\n  current = &quot;! git rev-parse --abbrev-ref HEAD&quot;\n  # Erase all branches except master and current branch\n  erase = &quot;! git branch | grep -v master | grep -v $(git current) | xargs git branch -D&quot;</code></pre></div>","timeToRead":4,"frontmatter":{"date":"18/03/2020","path":"/post/emendando-commits/","title":"Emendando commits","subtitle":"E outras dicas para deixar sua árvore mais concisa","banner":{"author":"Kelly Sikkema","href":"https://unsplash.com/photos/j-mE_jp7OT0","image":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1200'%20height='750'%20viewBox='0%200%201200%20750'%20preserveAspectRatio='none'%3e%3cpath%20d='M11%204c0%204%200%204-4%207l-5%204-1%202-1%20331v332l2%201%207%202c8%202%2018%204%2020%206%204%202%204%202%2011-5%209-9%2011-9%2018-3l4%204-1%209v9l23%2011a206%20206%200%200138%2016l5%201a193%20193%200%200022%209l8%203%206%203c6%204%205%204%2064%204l56-1%206-7%206-7%208-9c3-2%207-2%208-1%201%203-3%2011-7%2014a298%20298%200%2000-12%209c-1%202-1%202%20169%202a8578%208578%200%2000162-2l-11-2c-5-3-11-4-13-3-2%202-2%202-9%200-6-1-6-1-6-4l1-4c2-2%209-1%2014%201s5%202%208%201c4-2%208-2%2011-1l5%203%203%202%204%202%202%202%203%201%208%202c3%202%205%202%2072%202l69-1%208-5a304%20304%200%200043-30c3-1%207-4%2014-11l6-5%2012-9a88%2088%200%200110-8c3-3%2010-6%2012-6l4-1%201-2%205-3%205-5c1%200%202-1%202-3%200-4%201-4%208-5%205%200%2010-2%2012-4l10-6%204-3%205-3a701%20701%200%200071-52l6-4%2019-15%206-5%2023-19%2017-13a965%20965%200%200065-49%20282%20282%200%200034-25c15-12%2014-12%2014-3v8l-6%204a293%20293%200%2000-32%2022%20681%20681%200%2000-95%2073c-7%204-14%2011-17%2013-2%203-6%206-9%207l-7%206-7%207-11%208-13%2011a1023%201023%200%2000-47%2031l-7%204-25%2012c-3%200-4%208-2%2012%207%208-5%2015-16%209-8-4-10-5-12-2l-8%209-6%207-1%201-3%202-4%202c-4%201-4%2010-1%2014%201%202%201%205-1%2011-2%205-5%208-11%208-3%200-11-4-11-6%200-5-7-4-16%202l-6%204-2%201-6%204-16%209c-2%202%204%202%20135%202h137v-4c-1-4%205-10%2010-10l4-1%201-1c2%201%202%204%202%2011v5h38v-3l1-3%201-2c0-1%201-2%203-2l2%201%203%201%203-1c0-1%200-3%202-5l2-6%201-2%202-4%202-4%204-14%204-15%201-7%201-8%202-3%202-16%202-9%203-9%201-4%204-11%201-2%202-5c3-4%206-8%206-10l1-4c1%200%202-2%201-5l2-10c1-7%204-14%204-11%200%204%202-2%202-6l2-7%201-7%201-7c1-2%202%2010%202%2064l1-262-1-340V0H940l-5%207-15%2020c-9%2010-16%2021-16%2024%200%204-1%206-6%209l-18%2019a1142%201142%200%2001-27%2032l3%201%203%203%201%202%201%203-1%204c-2%205-8%208-15%208l-5%201c0%201-1%201-2-1-2-3-5-3-7-1a646%20646%200%2001-19%2019%202365%202365%200%2001-21%2023l-3%203%202%203a650%20650%200%20005%206c0%201%208%200%2012-2h4v1l-1%207c0%2013-1%2017-4%2017l-4%202c-2%202-2%202-5%201h-8l-4-1c1-2%200-2-3-1-5%200-6-2-5-6l1-4-1-1c-2-1-3-3-1-3l1-2c-1-3-1-3%202-2%202%201%203%201%206-1l4-2-2-3-2-4v-2c0-3-1-4-2-2l-4%201h-4l7%201%202%201a5766%205766%200%2001-98%20101l2%203%202%202c4%201%207%209%204%2011l-1%202c0%203-3%208-5%209l-5%202c-2%203-6%203-11%200-5-2-6-3-3-5l3-4c1-4%205-5%2010-2l4%202c2%200-3-4-7-5l-3-3c-2-5-2-4-12%207l-4%206-2%203-4%204-4%203-3%202-2%202-7%206a294%20294%200%2001-20%2018l-17%2017c-27%2024-45%2042-52%2051l-14%2025a38307%2038307%200%2000-38%2075%201692%201692%200%2000-28%2047c0%204%202%204%207%200%203-3%203-3%204-2%202%203%208%202%2014-2l12-6%209-6c2-3%204-3%209-4%206-1%2018-6%2035-16a721%20721%200%200141-23c8-7%2015-2%209%206-2%203-23%2014-25%2014l-48%2024c-3%202-2%203%201%204%204%202%205%203%204%2010%200%205-1%206-4%207l-6%202c-3%203-5%203-7%202l-6-3c-3%200-4-1-5-5-2-5-2-5-18%203-13%207-15%208-14%2013%201%204-13%208-17%205s-5-2-9%202l-8%206c-6%204-11%209-23%2026a133%20133%200%2001-16%2019%2099%2099%200%2001-15%2015c-3%203-5%203-8%203l-1%201-1%202v-1l1-6c0-3%201-5%204-8a271%20271%200%200037-45%20242%20242%200%200015-18l12-16c2-6%206-10%209-14l6-7%204-7c1-1%204-5%205-9l5-9%203-6%203-6%204-9%205-9%209-19%206-12%205-11%203-8%203-7%202-4%202-4%201-2%201-5c0-2%200-3%202-3s4-2%202-3v-3c0-2-6-11-12-17l-5-4c-3-3-6-4-6-2l-1%203%202%201c2%200%203%200%205%203l5%203c4%201%204%205%200%205-2%201-3%202-4%205-3%204-6%204-9%200-1-3-3-4-3-1%200%202-3%202-3%200l-3-2c-3%200-4-3-4-6%201-2%200-2-2-4-3-1-4-3-2-5l3%201c2%202%203%202%203%201%201-1%200-2-1-2-5-2-3-9%202-9l3-2c2-3-7-11-10-10l-4-1c-1-1-2-1-4%201-3%204-8%201-8-5%200-2%200-3-2-3l-4-2c-2-2-2-2%200-3l3-2c3%200%202-2-2-4l-4-4-1-1-7-4-8-4c-3%200-6-3-7-7%200-4-2-8-5-8v3l-9-4c-2-1-4-2-6-1-5%200-5%200-8%202-2%202-2%202-1%203%202%201%206%201%209-1h2c1%201-1%209-2%2010v6c0%205%200%205-3%206h-4c-1-1-2%200-4%201-1%202-5%203-7%201l-4-1h-5c-1-2-1-2%201-2l3-1c1-2-2-3-5-3-3%201-4%200-5-3l-1-4c2-2%201-5-1-7-4-6%201-7%2011-4h7c0-2%206-7%2010-8%203-1%204-3%202-3v-1c0-2%204-2%206%200l10%205-3-3-4-4-8-8-11-11-20-17-10-8-1-1-4-2a479%20479%200%2000-52-43l-6-4-6-4-26-15a15378%2015378%200%2001-104-52%203661%203661%200%2001-60-27c-14-5-17-7-18-10-2-4-6-7-9-5l-3%202-6-2c-6-1-18-10-18-13%200-1-2-2-5-2-4%200-13-6-16-11l-2-4c-5-5-8-12-6-15%201-2%207%201%2014%208%205%205%209%208%2016%2011a1575%201575%200%200167%2033%209611%209611%200%2001164%2081c-1-4-1-4%201-5l4%202c1%202%204%204%207%205l6%205%204%204c4%201%2010%207%2011%2011l2%203%207%205a443%20443%200%200037%2031l6%206a468%20468%200%200167%2060c-2%200%2011%2012%2019%2018a52%2052%200%200110%209l2%201%201%202-1%201%202%201c1-1%202-3%201-6v-4c2-1%202-1%204%201%203%203%207%203%207%200s2-5%203-5l3%204c0%202%202%203%204%204%204%202%205%208%200%2010l-1%201v3l1%201c2-1%202%200%201%203-1%201%201%204%207%209%208%208%209%209%209%206-1-3%203-5%206-5l3-2c2-3%205-2%206%202l3%203c2%200%206-3%206-5s3-1%206%201l2%205c-1%201%200%202%201%203%204%205-1%207-10%205h-2l10%209c0%202%203%200%2013-10%2014-15%2023-23%2035-34a986%20986%200%200058-56%201480%201480%200%2000113-114c-2-3-1-5%201-5%202%201%204%200%206-3l4-3c3%200%2014-11%2035-34a1015%201015%200%200140-44c-1%201-1%201-1-1%201-1%200-2-1-2-3-1-2-3%203-7%206-5%2011-6%209-3l-1%203c1%201%2017-17%2019-22l6-7a241%20241%200%20009-11v-1l10-13%207-8%208-9c1-2-2-2-55-2h-57v4c0%204%200%204-3%204-4%200-9%202-9%203l-7-1h-1c0%202-3%201-5-2-2-1-3-4-3-5V0H11v4m625%2049l-1%202-2%201c-2%200-2%201-2%204s0%204%202%204%202%201%202%204%200%204%202%205c2%200%203%201%203%206s0%206%205%204c4-2%204-3%202-6-2-2-3-5-3-13-1-11-3-13-8-11M44%20120c-10%202-20%206-20%2010l-2%204c-2%202-3%203-3%206%200%205%203%2015%204%2015l2%202%204%204%203%202c0%202%2013%205%2017%205l4%202c1%202%202%202%206%202s5%200%209-5l4-6%201-1c4%200%203-21%200-24l-2-3-3-3-3-2-3-2-3-2-3-2-3-1c-1-1-4-2-9-1m610%2036l-6%202-2%202-1%204c0%203%200%204%202%204l1%204c0%204%200%204%203%204%202%200%202%200%201%204%200%204%200%204%202%204l2-2c0-2%201-2%205-3l6-2c0-2%204-1%206%201h3c1-1%202-2%204-1%203%202%205%200%205-4l2-3v-2l-4-3c-7-7-21-11-29-9m-102%202c0%201-1%202-3%202s-3%201-3%202l-1%201v21l1%204c1%202%202%204%204%204l2%203c0%205%209%202%2011-3l3-6%201-2-1-5c0-11-3-19-8-19l-3-1c-1-2-3-2-3-1m0%2051l-6%202c-10%202-17%206-18%2010%200%203%200%203-5%203h-3l-2%202c-5%202-7%205-6%209l1%205c2%201%204%207%203%208l1%202%202-1c1-1%201%200%201%201%200%203%200%203%205%203s8%202%204%203h7l10-2%207-1c7%200%208-1%204-3l-3-1%204-1c5-1%207-3%206-8%200-8%200-8-3-8-2%200-3%201-3%202l-2%201c-2%200-2-1-2-3l-1-4-1-5v-5h-4l-4-1%206-1h5v-4l-1-4-2%201m90%2044l-4%206c-3%205-5%208-7%208-3%200-3%2014%201%2018l4%203c2%200%209-5%2010-7l1-1c3%201%206-17%205-22s-6-8-10-5m96%2031l-2%203-1%201-2%206c0%205%200%206%208%206%205%200%207-1%207-7%200-4-1-5-5-8-3-2-3-2-5-1m372%2049c0%204%200%205-3%207-4%204-4%2011-1%2015l3%204%204%203%205%206c1%202%201%202%202%201l4%202c5%204%205%205%202%205-2%200-2%200-1%201%201%202%2013%202%2014%200l2-1%201-4c0-4%200-4%203-4%202%200%202%200%202-5%200-7-2-11-4-11l-3-1-3-2-1-2-1-3-3-5c-3-6-7-8-15-8l-5-1-1-2-1%205m-59%2048l-3%202-8%202c-6%200-8%201-8%202l4%201%204-1c0-1%2012-1%2016%201l4-2%203-2c1%200%202-1%201-2s-10-2-13-1M349%20585c-5%201-11%2020-9%2026%205%2011%2021%2016%2021%207%200-2%200-2-1-1%200%201-1%201-2-1-3-2-2-4%201-5%208-3%209-4%208-5s0-2%202-4c2-1%202-2%201-2l-3-2c-1-2-2-2-5-2-5%201-7%200-7-5%201-6-1-8-6-6m811%2027c0%201-1%202-5%202l-4%201-1%204%201%205%201%203c0%203%208%203%2011%200l3-2-3-1c-5%200-4-3%201-3%205-1%207-3%205-7-1-3-2-3-5-3l-4%201m-797%2041l-6%201-8%202c-3%202-8%203-10%203-4%200-8%205-8%209%200%206%202%208%209%209l9%203-4%207-2%203-4%204-3%203-2%202-3%202-5%205-8%208c-1%204%202%204%206%201l4-3%201-2%202-3%203-2h2c1%201%202%202%201%203-2%201%200%203%205%204%206%201%208%201%2012-3%203-3%203-5%200-9-3-3-5-7-5-9l3-4%204-5c0-2%203-4%205-5%206-3%2010-6%2014-10s4-4%204-9v-4l-8-1h-8M0%20721v29h80a3255%203255%200%200071-2c-4-1-10-2-13-4l-16-6-6-3-5-2-9-4-8-3-7-2-6-3-5-2-13-5-9-3-3-1-5-1c-4-3-5-2-8%200-9%208-16%209-25%205-7-3-8-6-8-12s-2-11-4-11l-1%2030m334%203c-7%203-8%205-5%2011%204%207%2011%207%2017-1%203-4%203-4-1-8-3-3-5-4-11-2'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.5957446808510638,"src":"/static/984592173af082ae9a55602bd6f55624/21095/banner.jpg","srcSet":"/static/984592173af082ae9a55602bd6f55624/36b10/banner.jpg 300w,\n/static/984592173af082ae9a55602bd6f55624/88367/banner.jpg 600w,\n/static/984592173af082ae9a55602bd6f55624/21095/banner.jpg 1200w,\n/static/984592173af082ae9a55602bd6f55624/97ce3/banner.jpg 1800w,\n/static/984592173af082ae9a55602bd6f55624/d23b7/banner.jpg 1920w","sizes":"(max-width: 1200px) 100vw, 1200px"},"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAECAwQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAeQViUjHYNsV/8QAGhAAAQUBAAAAAAAAAAAAAAAAAQACEBFBIv/aAAgBAQABBQJGLqcxg5//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAbEAEBAAMAAwAAAAAAAAAAAAABABEhQTFRcf/aAAgBAQABPyEGWDHfcNoz219tMbbeBHP/2gAMAwEAAgADAAAAEPDIQP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABsQAQADAQADAAAAAAAAAAAAAAEAESExQWGx/9oACAEBAAE/EKg2K4VMRSur5FTjmZMqKXU6kXF4laNnoILHtyhR1vY0WeZ//9k=","width":1200,"height":1200,"src":"/static/984592173af082ae9a55602bd6f55624/ebdd7/banner.jpg","srcSet":"/static/984592173af082ae9a55602bd6f55624/ebdd7/banner.jpg 1x,\n/static/984592173af082ae9a55602bd6f55624/b9876/banner.jpg 1.5x"}}}}}}},"pageContext":{}}}