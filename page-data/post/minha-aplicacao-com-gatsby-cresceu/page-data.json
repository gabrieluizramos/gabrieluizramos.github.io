{"componentChunkName":"component---src-templates-post-article-index-js","path":"/post/minha-aplicacao-com-gatsby-cresceu","result":{"data":{"markdownRemark":{"html":"<p>Tenho trabalhado com <a href=\"https://www.gatsbyjs.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Gatsby</a> em alguns projetos ultimamente (além do blog/site), e um deles tomou uma proporção razoavelmente grande: é um site com algumas 8/9 páginas mas que possui algumas necessidades interessantes e acho que você pode passar por algumas das situações pelas quais passei caso esteja utilizando essa ferramenta também.</p>\n<h3>Estrutura de páginas e seções</h3>\n<p>É bem comum que você escreva seus componentes diretamente nas suas páginas e essa, com certeza, é a melhor e mais prática forma de trabalhar.</p>\n<p>Entretanto, quando suas páginas começam a crescer e você começa a criar vários componentes, pode ser que seu esse componente que contém a sua página fique um pouco grande. Para lidar com esses casos, Decidi separar o conteúdo de minhas páginas em 2 diretórios: <code class=\"language-text\">pages</code> (a padrão do gatsby) e <code class=\"language-text\">sections</code> (onde as seções de cada página estariam).</p>\n<p>Dessa forma, os arquivos dentro de <code class=\"language-text\">pages</code> ficam, atualmente, responsáveis apenas por montar a estrutura básica repetida de cada da página com <code class=\"language-text\">layout</code>, <code class=\"language-text\">banner</code>, <code class=\"language-text\">seo</code> e fazer a consulta em <code class=\"language-text\">graphql</code> das imagens necessárias e os componentes dentro de <code class=\"language-text\">sections</code> recebem essas imagens como prop e inserem de fato o conteúdo, a estrutura ficou algo como:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">|src\n|____pages\n|       sobre.js\n|____sections\n|       sobre.js</code></pre></div>\n<p>Onde, no componente da página, ele possui uma declaração parecida com:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// arquivo pages/sobre.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/layout'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token constant\">SEO</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/seo'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Banner <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/banner'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Sections <span class=\"token keyword\">from</span> <span class=\"token string\">'../sections/sobre'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SobrePage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n  data\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> images <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// trata imagens e monta melhor estrutura para as seções</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SEO</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sobre<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Banner</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Sections</span></span> <span class=\"token attr-name\">images</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>images<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> query <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  // ... consulta imagens\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> SobrePage<span class=\"token punctuation\">;</span></code></pre></div>\n<p>E o componente da seção ficaria mais ou menos assim:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// arquivo sections/sobre.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SobreSections</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> images <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">conteudo</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> SobreSections<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Talvez possa parecer uma estrutura um pouco repetitiva, mas conforme essas seções vão crescendo, achei que deu uma boa ajuda.</p>\n<p>Caso você também precise utilizar subpáginas, você pode criar outras diretórios recursivamente dentro desse diretório <code class=\"language-text\">sections</code> e utilizar <a href=\"http://cangaceirojavascript.com.br/barrels-simplificando-importacoes-de-modulos/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">barrel exports</code></a> para facilitar os imports dessas suas páginas.</p>\n<p>Por exemplo, imagine que nossa página <code class=\"language-text\">sobre</code>, agora possuirá outras 3 subpáginas: <code class=\"language-text\">/sobre/empresa</code>, <code class=\"language-text\">/sobre/servico</code> e <code class=\"language-text\">/sobre/membros</code>.</p>\n<p>Nesse cenário você poderia ter uma estrutura parecida com:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">|src\n|____pages\n|   |____sobre\n|           empresa.js\n|           servico.js\n|           membros.js\n|____sections\n|   |____sobre\n|           index.js\n|           empresa.js\n|           servico.js\n|           membros.js</code></pre></div>\n<p>Facilitando o trabalho de <code class=\"language-text\">import/export</code>, no arquivo <code class=\"language-text\">index.js</code>, da seguinte maneira:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">as</span> EmpresaSections <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./empresa'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">as</span> ServicoSections <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./servico'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">as</span> MembrosSections <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./membros'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>E noas arquivos de cada página, os <code class=\"language-text\">imports</code> podem ficar algo como:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> EmpresaSections <span class=\"token keyword\">as</span> Sections <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../sections/sobre'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Lidando com imports na aplicação</h3>\n<p>É bem comum criarmos alguns <code class=\"language-text\">aliases</code> para facilitar a tarefa de lidar com os caminhos de diretórios de nossos arquivos.</p>\n<p>Com Gatsby não foi diferente e o plugin que me ajudou nessa tarefa foi o <a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-alias-imports/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">gatsby-plugin-alias-imports</code></a>.</p>\n<p>Não tem muito o que falar sobre ele, basta instalá-lo:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> i --save gatsby-plugin-alias-imports</code></pre></div>\n<p>E configurar os alias necessários (dentro dos <code class=\"language-text\">plugins</code> no arquivo <code class=\"language-text\">gatsby-config.js</code>):</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-alias-imports</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        alias<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">'@components'</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'src/components'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">'@sections'</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'src/sections'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">'@providers'</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'src/providers'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">'@hoc'</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'src/hoc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">'@styles'</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'src/styles'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        extensions<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'scss'</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Agora o diretório <code class=\"language-text\">src/components</code> do projeto, pode ser acessada assim, dentro dos componentes:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Card <span class=\"token keyword\">from</span> <span class=\"token string\">'@components/card'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Bem mais fácil do que ficar inserindo o caminho relativo ao arquivo, né?</p>\n<p>Vale lembrar que, caso esteja utilizando o VSCode, você precisará configurar o arquivo <code class=\"language-text\">jsconfig.json</code> para que ele continue te ajudando com aqueles <code class=\"language-text\">autocompletes</code> dos arquivos das diretórios. Com a estrutura de aliases acima, temos algo como:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es6\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"baseUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./src\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"paths\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"@components/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"components/*\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"@sections/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"sections/*\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"@providers/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"providers/*\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/**/*\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"exclude\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"node_modules\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"public\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"dist\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"build\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Se você quiser ler um pouco mais sobre essas configurações, você pode acessar <a href=\"https://code.visualstudio.com/docs/languages/jsconfig\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">a página do VSCode que fala mais detalhadamente</a>.</p>\n<h3>Estruturas extras (de sua preferência)</h3>\n<p>Ali no trecho de configuração dos <code class=\"language-text\">aliases</code> vocês devem ter visto que além da diretório <code class=\"language-text\">components</code> e <code class=\"language-text\">sections</code>, que comentamos, existe algumas outras diretórios, e são elas:</p>\n<ul>\n<li><code class=\"language-text\">provider</code>: separei essa diretório para representar às estruturas responsáveis por realizar chamadas HTTP na aplicação com base na <a href=\"https://pt-br.reactjs.org/docs/context.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Context API</a> do React, com hooks (como o useContextValue);</li>\n<li><code class=\"language-text\">hoc</code>: alguns higher-order components da aplicação;</li>\n<li><code class=\"language-text\">styles</code>: como os estilos desse projeto são feitos utilizando <a href=\"https://sass-lang.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">SASS</a>, alguns arquivos base estão ali (como as variáveis e alguns mixins com os breakpoints).</li>\n</ul>\n<h3>Lidando com traduções (internacionalização)</h3>\n<p>Começando a pesquisar sobre o tópico você vai encontrar a <a href=\"https://www.gatsbyjs.org/docs/localization-i18n/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">página do Gatsby que fala sobre o assunto</a>. Além de falarem que você pode escolher uma ferramenta para realizar as traduções, deixam como exemplo o plugin <code class=\"language-text\">gatsby-plugin-i18n</code>.</p>\n<p>O detalhe desse plugin é que, para cada idioma, você precisa de um novo arquivo de cada página: por exemplo, uma página <code class=\"language-text\">sobre.js</code>, para ser traduzida para inglês e espanhol, você teria <code class=\"language-text\">sobre.en.js</code> e <code class=\"language-text\">sobre.es.js</code>, que criaria as respectivas rotas <code class=\"language-text\">/en/sobre/</code> e <code class=\"language-text\">/es/sobre</code>.</p>\n<p>Provavelmente você não vai querer duplicar suas páginas completamente apenas para mudar o conteúdo. Duplicar essas páginas completamente apenas para mudar o conteúdo acaba se tornando uma tarefa chata e repetitiva, se suas páginas forem relativamente grandes esse problema se torna ainda pior.</p>\n<p>Pesquisando um pouco mais, encontrei um plugin chamado <a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-intl/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">gatsby-plugin-intl</code></a> que atendeu perfeitamente às minhas necessidades e realiza traduções baseada em arquivos <code class=\"language-text\">.json</code> de configuração dos idiomas desejado (e com um suporte bacana aos hooks).</p>\n<p>Basicamente, basta instalá-lo:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> i --save gatsby-plugin-intl</code></pre></div>\n<p>E configurar (dentro dos <code class=\"language-text\">plugins</code> no arquivo <code class=\"language-text\">gatsby-config.js</code>):</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-intl</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/translations</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        languages<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'pt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'es'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        defaultLanguage<span class=\"token operator\">:</span> <span class=\"token string\">'pt'</span><span class=\"token punctuation\">,</span>\n        redirect<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Onde:</p>\n<ul>\n<li><code class=\"language-text\">path</code>: contém o caminho, no seu projeto, para onde os arquivos <code class=\"language-text\">.json</code> de tradução estão localizados;</li>\n<li><code class=\"language-text\">languages</code>: um array contendo as siglas dos idiomas das traduções (que também devem ser os nomes dos arquivos, respectivamente);</li>\n<li><code class=\"language-text\">defaultLanguage</code>: valor \"padrão\", que serve como idioma base para tradução (no caso, o site é em português por padrão);</li>\n<li><code class=\"language-text\">redirect</code>: booleano que indica se, ao acessar a raíz do projeto <code class=\"language-text\">/</code>, o usuário deve ser redirectionado para o caminho da linguagem padrão. Nesse caso, se estivesse como <code class=\"language-text\">true</code>, os usuários seriam redirecionados para <code class=\"language-text\">/pt</code> toda vez que acessassem o site e não era um comportamento que queríamos.</li>\n</ul>\n<p>Dessa forma, a estrutura das traduções ficou algo como:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">|src\n|____translations\n|       pt.json\n|       en.json\n|       es.json</code></pre></div>\n<p>Onde, cada arquivo <code class=\"language-text\">.json</code> possui as chaves que serão utilizadas como tradução:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"header\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"name\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>E dentro dos componentes que precisam de um conteúdo traduzido, basta importar o hook (se quiser dessa maneira) e utilizá-lo, passando como <code class=\"language-text\">id</code> a chave do conteúdo a ser traduzido:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useIntl <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-plugin-intl'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Header</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> intl <span class=\"token operator\">=</span> <span class=\"token function\">useItnl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>intl<span class=\"token punctuation\">.</span><span class=\"token function\">formatMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token string\">'header.title'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Esse plugin também te permite usar um componente <code class=\"language-text\">Link</code>, que faz a navegação de forma parecida ao Link do gatsby, mas mantém a linguagem escolhida do usuário.</p>\n<h3>Conteúdo customizado por rota</h3>\n<p>É comum em alguns sites você ter algum conteúdo customizado baseado na rota que o usuário está acessando.</p>\n<p>Por exemplo: na página <code class=\"language-text\">/sobre</code>, o o texto <code class=\"language-text\">sobre</code> no menu do seu site ficar com algum detalhe diferente, fazendo com que o usuário identifique que é a página ativa atualmente.</p>\n<p>Para realizar algumas customizações como essa, você pode passar a página atual como prop pro seu componente desejado, mas caso queira deixar essas definições dinâmicas e consultar as rotas da aplicação sem ter que passar esses valores manualmente, o Gatsby disponibiliza também o pacote <a href=\"https://www.gatsbyjs.org/docs/reach-router-and-gatsby/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">@react/router</code></a> para você utilizar.</p>\n<p>Dessa forma, você consegue trabalhar um pouco melhor com as rotas que o usuário está acessando, sem precisar instalar outros pacotes extras.</p>\n<hr>\n<h3>Conclusão</h3>\n<p>Esses foram alguns desafios que enfrentei nesse projeto que tomou uma proporção interessante.</p>\n<p>Sinta-se à vontade para comentar e compartilhar suas decisões e outras abordagens que te ajudaram nos projetos utilizando Gatsby!\nEspero que esses plugins e dicas de estrutura possam te ajudar também!</p>","timeToRead":7,"frontmatter":{"date":"25/03/2020","path":"/post/minha-aplicacao-com-gatsby-cresceu","title":"Minha aplicação com Gastby cresceu","subtitle":"Algumas situações que passei, decisões que tomei e plugins que me salvaram a pele","banner":{"author":"Jukan Tateisi","href":"https://unsplash.com/photos/bJhT_8nbUA0","image":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1200'%20height='750'%3e%3cpath%20d='M12%205v6H6l-6%201h5a1967%201967%200%200052-1H14l-1-6-1-5v5m392-1c0%205-2%206-8%206h-77l31%201c26%200%2063%200%2057-1-1%200-2-1-2-5-1-5-1-5-1-1m131%200c0%205%202%205-54%205a1337%201337%200%20003%201h52V0l-1%204m131%200v4h-48a6931%206931%200%2001-2%201h73v91h-5a1541%201541%200%2001-30%201l73%201h72v44h-8a1241%201241%200%20017%202%20706%20706%200%200145%202l2%205%204%209a370%20370%200%200119%2046l2%205a320%20320%200%20019%2023l-58%201a606%20606%200%200050%202l11%201%202%205a187%20187%200%20008%2019l5%2010%201%202c0%203%207%2018%208%2018l1%202v4l2%204%202%203%201%204%201%203%203%205%203%207c1%202%200%203-8%203-3%201-3%201%202%201%207%200%208%201%209%204%200%203%204%2010%207%2012l2%204c-1%201%201%208%202%208l1%203%202%206c3%205%202%207-3%207l-24%201%2015%201%2016%201%201%201%201%204%202%206%201%202%201%203%209%2022%204%209h-6c-7%201-16%205-12%206%203%200%204%202%201%202v1l-2%201c-2%200-2%201-2%204l-3%207c-6%205-5%207%200%202l3-2%201%202%206%204%204%204c0%201%202%203%205%204l6%203%202-2%2010-9c2-1%205%201%206%205%202%205%202%207%200%207l-4%202-7%202-5%203c-2%201-4%201-4-2l-2%204-2%205-5-1-6%201c0%201%207%202%209%201%201%200%202%203%202%2015a241%20241%200%20000%2025l-7%208a481%20481%200%2001-32%2038c-5%206-7%208-8%207l-2%201%201%201a2980%202980%200%2000-65%2078%20178%20178%200%2001-16%2018h-1c1%201%200%203-2%205l-3%203-3%204a329%20329%200%2000-18%2020c0%202-4%207-5%205l-2%203c-2%204-2%204-3%202%200-2%200-2-3%202l-8%208-4%206-1%201-2%202-1%202c-2%200-7%207-6%208%203%200%202%201%200%204l-2%203%2028%201h29l3-4a3493%203493%200%2001121-171l10-14%2014-19c0%201-4%2010-6%2011l-2%203-3%204-2%204-1%201-2%203-10%2015-4%205-2%204a123%20123%200%2000-14%2021l-2%204c0%201%200%202-1%201l-1%201c1%203-7%2014-19%2026l-6%207-3%206-3%206a127%20127%200%2001-13%2017c0%202-8%2011-11%2012-2%201-2%201-1%202v1l-3%204-3%204-4%206-21%2030-5%209%20188%201h189V419l-1-375V0H780l1%203%201%204h-58l-56%201V4l-1-4-1%204m24%2051l1%2046h26l43-1h16V9h-86v46m88-45l-1%2045v45h22l22-1-5-14a1546%201546%200%2001-31-75h-7M512%2064v37h-26l-27%201a2104%202104%200%2000114-1h-59V73a548%20548%200%2000-2-9M295%2081v22h-3a1455%201455%200%20008-1h-4V80l-1-21v22M1%2098l1%205a273%20273%200%200123%204l-1-5-2-5-8-1-11-2c-2%200-2%200-2%204m804%204h-5v44h20l21-1v-1l-1-1-2-6a119%20119%200%2001-9-21c-3-6-5-13-4-13l-6-1h-14M1%20112v7l11%201a6735%206735%200%200054%209h3l-2-5-2-4-10-2c-8-1-10-2-10-4l-1-2a1431%201431%200%2001-42-7l-1%207m0%2016v8l11%201a3110%203110%200%2000133%2016l12-1%2022-2%2020-1h-21l-21%201-23%201h-22l-1-5-4-5c-7%200-17-2-18-4l-1-2a1119%201119%200%2001-85-14c-2%200-2%200-2%207m0%2016l1%204a3410%203410%200%2001143%2019c8%201%208%201%207-2s-1-3-6-3c-8%200-12-1-13-3a9740%209740%200%2001-89-14c-45-7-43-7-43-1m534%201v2h-38l-32%201h19l21%201h8v91h-25c-20%200-26%200-25%201%200%201%204%202%2013%202a280%20280%200%200128%200l19-2%2019-1h-27v-91l45-1%2045-1h-69v-2l-1-2v2M1%20162v13h3l10%201a1535%201535%200%200172%208%205137%205137%200%2001154%2017%2065446%2065446%200%2000176%2018l-6-12c-4%201-13-1-13-3-1-1-2-2-7-2a270%20270%200%2001-34-5A25847%2025847%200%20012%20150l-1%2012m0%2029c0%2014%200%2014%202%2014l24%202a7140%207140%200%2001170%2015%2015107%2015107%200%2001263%2020c-4-11-6-13-7-13l-2%201h-1l-4-1c-3%200-4%200-5-2%200-2-9-3-36-6A36753%2036753%200%20003%20178c-2%200-2%201-2%2013m0%2033v16h7a9083%209083%200%2000233%2013%20307377%20307377%200%2000259%2013c5%200%205%200%201-9l-3-6h-6c-5%200-6%200-6-2l-13-2a420%20420%200%2001-36-4l-13-1a444%20444%200%2000-53-4%205466%205466%200%2000-143-12%202533%202533%200%2000-65-4%2013541%2013541%200%2001-151-13l-11-1v16m0%2038v18h15l207%204a46290%2046290%200%2001325%205l-2-6-3-8c-1-2-2-2-7-2l-6-1a1775%201775%200%2001-111-7%207140%207140%200%2001-154-8h-1l-16-1-35-2A73081%2073081%200%20007%20244H1v18m798%2043v26l-59%201-59%201h58l60-1%201-27-1-26v26M1%20304v21h21a49159%2049159%200%2001571-14l-2-5-3-7-5-4-1%203c0%202%200%202-1%200-2-1-2-1-2%201s-2%204-2%201c-1-1-1%200-1%202%200%203-1%204-4%202v-8c-2%200-4%204-4%207l-1%201v-8c1-1-1-1-3-1-3%200-3-1%204-1l8-1h-16l-14-1a2337%202337%200%2001-84-1l-56-2a23030%2023030%200%2000-363-5l-40-1H1v21m549-20c-2%202%203%202%2022%202%2017%201%2020%200%2020-1%200-2-41-3-42-1m44%2022c0%204%206%204%2035%201%2012-1%207-1-15-2l-20%201m-2%2012l-4%201c-3%200-4%200-3%201%202%200%202%202%200%203l-1-1-4-3h-3l4-1a2597%202597%200%2000-214%204A33672%2033672%200%20018%20332H1v45l3-1%2019-1a10983%2010983%200%2000236-16%2016247%2016247%200%2000295-20l48-3%2035-2-2-3-3-8c-2-4-3-5-5-5s-2%200-1%201l2%204c0%201%200%202-1%201l-2-3c-1-1-1-1-1%201%201%201%200%202-1%202l-1%202c0%203-2%204-4%201-1-2-2-2-4-1l-5%203c-4%200-4%200-3-3%200-2%200-2-1%200s-1%202-1-2c0-3%200-4%202-5s2-1%200-1h-2l2-1c2-1%200-1-6-1s-8%200-8%202m38%2022a10822%2010822%200%2001-249%2018%204255%204255%200%2000-178%2014%20278%20278%200%2001-25%202c-1%201-2%202-3%201l-5-1a1924%201924%200%2001-131%2011%20709%20709%200%2000-36%202H1v25c0%2023%200%2025%202%2025l64-7a30328%2030328%200%2001479-58%2025363%2025363%200%2000134-17c0-3-7-16-8-16l-2%201%201%201v5l-1%203-1-3v-3l-1-1v-1l-1-1c-1%200-2%201-1%202l-1%201-1%203-2%205h-6c0-1-1-2-3-2s-3%201-3%202l-1%201-1-1-6-1c-14%200-18-1-18-4%200-2%200-2%204-2l6-2h10l8%201-4-2c-6%200-6%200-3-1h-15m64%2022l-2%201%201%201c2-1%203%206%201%209%200%201-1%201-1-2l-1-3v4l-2%203h-1c-1%201-2%202-3%201l-3%201h-4c-2%200-2%200%200%201h-5c-6%200-11-2-7-2l2-2%201-4-1-2-3%202-2%202h-3c-1%201-1%201-2-1-1-4-5-5-18-3a1789%201789%200%2001-118%2016%20330%20330%200%2000-36%206%203434%203434%200%2000-146%2019%2016704%2016704%200%2000-263%2035l-33%204-35%205-9%201v58l5-1a6134%206134%200%2001180-34%203176%203176%200%200199-18%206665%206665%200%2001201-38%2016973%2016973%200%2001238-44l-8-15v1c1%202-1%207-4%207l-3%202c0%202-3%203-4%201l-1-1c-1%200-2-1-2-3l-3-4v-2c1-1-2-2-5-1m212%2014l-69%201-69%201a2340%202340%200%2000138-2m-147%208l1%205c0%204%200%204-2%204s-5%202-4%204h-4l-5%201-4%202-4%201h-9l-9%201v-5c0-3%200-4%202-4v-1l-1-2%202%201h2l5-3h-6a12827%2012827%200%2001-217%2045%203514%203514%200%2001-130%2027c-15%202-17%203-17%205h-2a887%20887%200%2001-96%2019%206037%206037%200%2000-75%2015l-17%204-14%203a2127%202127%200%2000-89%2017c0-2-2%200-2%202%200%201-1%202-2%201l-10%202a600%20600%200%2001-47%2010l-4%201v211h485l5-4a160%20160%200%200114-9%202836%202836%200%200180-55%203185%203185%200%2000111-77%206032%206032%200%2001138-94%202293%202293%200%200063-44c2-1%202-2-2-12l-4-7v5l-2%208-2%204v-4c0-4%200-4-1-2s-2%202-2%201l-1%201c-1%201-1%200-1-3l1-5c4-2-2-1-6%202l-6%203c-2%201-2%201-1%202v1h-1l-11%205a1212%201212%200%2000-72%2042%201891%201891%200%2001-96%2057%201792%201792%200%2001-96%2057l-2%201-1%201c-1%200-6%202-11%206l-18%2011-11%205-1%201-5%203a344%20344%200%2000-41%2024l-20%2012-16%209-28%2015-3-1c-1-1-3-1-11%202l-9%203h-39c-45-1-49-1-48-4a6130%206130%200%2000213-109%2039946%2039946%200%2000309-156c4%200%204-1%200-10-3-7-6-12-5-8v5c1%202-1%205-2%203-1-1-1-1-1%201%200%204-1%206-3%206-4%200-6%202-3%202%202%200-1%202-7%204l-3%201-10%201c-2%200-3%201-3%202l-2-8c0-4-2-5-3-3l-2%201-3%201c-2%200-2%200%200%201%201%201%201%201-1%201-3-1-11%202-16%205a396%20396%200%2001-37%2015%20384%20384%200%2001-30%2013%20982%20982%200%2001-63%2026%202970%202970%200%2001-117%2051l-2%201-6%202a513%20513%200%2001-70%2030%201472%201472%200%2000-90%2038%201068%201068%200%2000-63%2026l-10%203c-13%205-16%206-40%206a1150%201150%200%2001-79-4c1-2%2022-12%2027-12l4-1a276%20276%200%200134-13%20908%20908%200%200159-22%204360%204360%200%2001164-60l27-11a12725%2012725%200%2000272-101%204049%204049%200%200044-15l-4-10c-4-8-4-8-5%202-1%204-2%207-2%203l-1%201c-1%202-7%205-9%204l-1%201c-1%201-1-1-1-7l-1-9-1%204v5l-1-4c0-4-1-5-5-2l-2%201h3c3-1%203-1%202%201h-8l-2-1-12%204a516%20516%200%2000-42%2012l-14%205a6420%206420%200%2000-176%2053%201104%201104%200%2000-55%2017%2024534%2024534%200%2000-322%2096l-4%201c-3%202-13%203-18%202l-14%201c-9%202-16%203-26%202l-37-1c-32-1-37-1-30-4l8-3%208-2%2024-7a1144%201144%200%200090-24%205979%205979%200%2001199-53%20109648%20109648%200%2000408-109l7-1-4-8c-2-6-3-9-5-9v1m175%2089l-1%204v2c1%201%201%201-1%204-3%204-4%204-3%201l1-3-1-4%201-2%203-3-11%208a1839%201839%200%2001-64%2052%201678%201678%200%2001-86%2071%20414%20414%200%2000-41%2033%20157%20157%200%2000-13%2012%202898%202898%200%2001-123%20100c-4%202%204%202%2036%202%2033%200%2037%200%2040-2l3-3a841%20841%200%200174-72%202300%202300%200%200097-91%203802%203802%200%200094-92l4-4-3-6-3-8c-1-3-3-2-3%201m70%2042c4%201%204%201%201%201-5%200-9%201-8%202l-2%202c-2%200-3%201-3%202l-1-1c-1-3-1-3-1%200v4h18c18%200%2022-1%2019-3l2-1%204-2c0-2%200-2-1-1s-11%202-12%201l5-1c3%200%204%200%203-1l-3-1h-8l5-1c10-1%2010-1-6-1l-12%201'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.5957446808510638,"src":"/static/faf85ca25ca6a54c0b363a0915dae59f/21095/banner.jpg","srcSet":"/static/faf85ca25ca6a54c0b363a0915dae59f/36b10/banner.jpg 300w,\n/static/faf85ca25ca6a54c0b363a0915dae59f/88367/banner.jpg 600w,\n/static/faf85ca25ca6a54c0b363a0915dae59f/21095/banner.jpg 1200w,\n/static/faf85ca25ca6a54c0b363a0915dae59f/97ce3/banner.jpg 1800w,\n/static/faf85ca25ca6a54c0b363a0915dae59f/d23b7/banner.jpg 1920w","sizes":"(max-width: 1200px) 100vw, 1200px"},"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAF3YejFzCD/xAAaEAADAAMBAAAAAAAAAAAAAAAAAQIDERIi/9oACAEBAAEFAoy5EdK5eiGzfhn/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAABBQAAAAAAAAAAAAAAAAAAAREgIVH/2gAIAQEABj8C0Zaj/8QAGxAAAwACAwAAAAAAAAAAAAAAAAERIUExYeH/2gAIAQEAAT8hxFjsTtdMZGLSPZWe/Tkf/9oADAMBAAIAAwAAABC0/wD/xAAVEQEBAAAAAAAAAAAAAAAAAAAQMf/aAAgBAwEBPxCn/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAECAQE/EKF//8QAHRAAAgIBBQAAAAAAAAAAAAAAAREAIZExQVGhsf/aAAgBAQABPxACCEGivuKxBPZwxDFcQi7YAwsPanh5COE//9k=","width":1200,"height":1200,"src":"/static/faf85ca25ca6a54c0b363a0915dae59f/ebdd7/banner.jpg","srcSet":"/static/faf85ca25ca6a54c0b363a0915dae59f/ebdd7/banner.jpg 1x,\n/static/faf85ca25ca6a54c0b363a0915dae59f/b9876/banner.jpg 1.5x"}}}}}}},"pageContext":{}}}