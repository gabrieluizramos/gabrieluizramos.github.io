{"componentChunkName":"component---src-templates-post-article-index-js","path":"/parse-objetos-na-nuvem/","result":{"data":{"markdownRemark":{"id":"0e1b53e1-a84e-510c-a2e4-3c202d1d1e3d","html":"<p>Esse artigo foi publicado originalmente no site <a href=\"https://tableless.com.br/parse-objetos-na-nuvem-2/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Tableless</a>, em 2015.\nComo estou passando meus posts para meu próprio blog, segue abaixo o conteúdo que escrevi :)</p>\n<hr>\n<p>Alguns dias atrás eu estava estudando um projeto que deveria apresentar, relacionado a WebApps. Decidi a plataforma da minha apresentação, mas acrescentar algo mais.</p>\n<p>Eu tinha lido algumas coisas sobre um banco de dados que traria uma nova perspectiva aos desenvolvedores, facilitando seu acesso e fazendo suas conexões até por JavaScript (coisa que me intrigou bastante até começar a utilizá-lo), possibilitando leitura, gravação e consulta de dados. Foi aí que comecei a estudar sobre o Parse.</p>\n<h3 id=\"uma-breve-introducao-ao-parse\" style=\"position:relative;\">Uma breve introdução ao Parse</h3>\n<p>Construirei um exemplo pequeno, utilizando JavaScript, gravando dados em uma Classe do Parse e retornando as IDs dos objetos que foram gravados. Mas antes, uma pequena explicação sobre os nomes que esta plataforma usa, para que a gente possa estar falando da mesma coisa, sem usar identificações diferentes:</p>\n<ul>\n<li>Classe: dentro do Parse, é a mesma coisa que tabela. Ou seja, uma tabela de dados, dentro de suas aplicações e até mesmo no painel de sua conta será sempre tratada como “Class”;</li>\n<li>Objetos: dentro e fora de seu projeto, cada linha da sua tabela será tratada como um objeto, possuindo várias informações divididas em colunas. Uma dessas informações é a ID que iremos utilizar, gerada automaticamente pelo Parse;</li>\n<li>Campos são colunas.</li>\n</ul>\n<p>Antes de tudo, vamos à nossa aplicação: você precisa criar uma conta no Parse, para que possa entender exatamente o que estou falando, e seguir o passo a passo pelos seus dados de usuário (ao final, deixarei um exemplo contendo tudo que utilizei aqui).</p>\n<p>Ao clicar para criar a sua conta, você preencherá seus dados e será informado sobre o nome do seu primeiro Aplicativo. Dê o nome que quiser; você poderá criar outros mais pra frente sem problemas. Após criar sua conta, aparecerá uma janela para você dar início às suas aplicações com o Parse. Como trataremos de um exemplo via JavaScript, clique em <strong>“Data”</strong>, depois clique em <strong>“Web”</strong> e depois em <strong>“New Project”</strong>.</p>\n<p>Você será levado a uma página contendo uma explicação sobre o SDK do Parse, e também sua ID e Key de usuário, para que você possa fazer suas conexões com seus aplicativos do Parse. Um exemplo será disponibilizado para você baixar em um botão como <strong>“Download the blank Javascript/HTML5 Project”</strong>, onde você poderá baixar e dar uma olhada em um exemplo “em branco” de uma página acessando seu banco de dados. Baixem essa página, ela será necessária mais pra frente.</p>\n<p>Sua ID e Key aparecerão na página em um trecho JavaScript, dessa forma (exemplo):</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n  Parse<span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"valor-da-sua-id\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"valor-da-sua-key\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<p>Guarde este código, utilizaremos mais pra frente.</p>\n<p>No HTML\nConstruí uma página HTML básica, só para fazer o envio e o recebimento dos objetos à Classe do Parse, desta forma:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>\n  Digite seu nome: <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>enviaNome<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>armazena()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Armazenar nome no Parse<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>retorna()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Retornar ID dos objetos do Parse<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>tempNames<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Deixei um parágrafo para um campo de texto, dois botões que chamam duas funções que já veremos mais pra frente (uma para gravar objetos na base de dados e outra para retornar), e um parágrafo vazio, com uma ID para receber os objetos que gravaremos.</p>\n<h3 id=\"mao-na-nuvem\" style=\"position:relative;\">Mão na nuvem</h3>\n<p>Feito isso, começaremos a utilizar as infomações que o Parse nos dá. Eu separei meus scripts dessa forma, para facilitar a minha visualização (nada impede que você os coloque da forma que quiser, onde quiser, contanto que atinja o objetivo, utilize o padrão ao qual você está acostumado). Lembram daquela linha com o “Parse.initialize”? Então, eu a coloquei da seguinte forma, dentro da do meu HTML:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  Parse<span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"minha-id\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"minha-key\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Como é um trecho de código que “inicializa” minha aplicação com o Parse, decidi por colocá-lo dentro do HTML mesmo. Precisaremos do script do Parse que é disponibilizado naquela página “em branco”. Você pode baixá-lo ou puxar pelo trecho que eles disponibilizam mesmo:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.parsecdn.com/js/parse-1.4.2.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Beleza! Já temos a aplicação com o ID e com o scripts funcionando corretamente, agora vamos às funções.</p>\n<p>Vamos lá, naquela página em branco vocês terão um exemplo de gravação de objetos dentro do Parse. Eu separei um script com duas funções para realizarmos isso:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">function</span> <span class=\"token function\">armazena</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> nome <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"enviaNome\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> conectaParse <span class=\"token operator\">=</span> Parse<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NomeClasse\"</span><span class=\"token punctuation\">)</span>\n    obj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">conectaParse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    obj<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"nome\"</span><span class=\"token punctuation\">,</span> nome<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    obj<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">success</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">valor</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Objeto criado com ID: \"</span> <span class=\"token operator\">+</span> obj<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">valor<span class=\"token punctuation\">,</span> error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Falha ao criar objeto\"</span> <span class=\"token operator\">+</span> error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">retorna</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tempNames\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> query <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Parse<span class=\"token punctuation\">.</span>Query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NomeClasse\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    query<span class=\"token punctuation\">.</span><span class=\"token function\">greaterThan</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"createdAt\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"2014-06-23T18:20:17.149Z\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    query<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">success</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">results</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> results<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tempNames\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> <span class=\"token punctuation\">(</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\"º Objeto da Classe: \"</span><span class=\"token operator\">+</span> results<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'não foi'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Notem que são as duas funções que são ativadas pelos botões que criamos; a função armazena e a função retorna, e elas fazem o seguinte:</p>\n<p>Na função armazena uma variável <strong>nome</strong> é criada, pegando o valor do campo <strong>enviaNome</strong> e uma classe <strong>conectaParse</strong> é criada para realizar a conexão com a classe de nome NomeParse (vale lembrar também que o Parse não aceita Classes com vírgulas, pontos, acentos ou caracteres especiais). Um objeto <strong>obj</strong> foi criado seguindo as especificações da classe <strong>conectaParse</strong>, para realizar o armazenamento dos objetos num campo <strong>nome</strong>.</p>\n<p>Se o dado for armazenado como sucesso, um alert aparecerá na tela com uma mensagem mostrando a ID do objeto dentro do banco de dados; caso contrário, uma mensagem de erro aparecerá. Vale lembrar que o tratamento das gravações dentro do Parse é um tanto quanto diferente. Se no seu código você indica uma Classe (lembrando que Classe = Tabela) ou um campo que não existe, a aplicação criará automaticamente essa Classe ou esse campo ao ser executada.</p>\n<p>Na função retorna eu tratei primeiro aquele parágrafo que criamos, para que toda vez que o botão for clicado todo o conteúdo do parágrafo seja apagado antes de pegarmos os objetos do Parse. Uma variável com nome de <strong>query</strong> foi criada e igualada à query do Parse, recebendo o parâmetro <strong>NomeClasse</strong>, que é o nome da Classe na qual iremos fazer a consulta.</p>\n<p>Feito isso, o trecho seguinte utiliza o método <strong>greaterThan</strong> para passar dois parâmetros dentro da pesquisa (ou query) que será executada. Um desses parâmetros é o <strong>createdAt</strong> e o outro é seu de data, ou seja, dentro dessa pesquisa, todos os objetos que estiverem na Classe do Parse que tenham sido criados na data que foi especificada, ou depois, devem ser retornados (notem que eu passei o ano de 2014, ou seja, como estamos criando essa pesquisa hoje, todos os objetos serão retornados).</p>\n<p>É possível criar diversas pesquisas, com diversos métodos e diversos parâmetros. Esse mesmo que utilizei eu peguei dos próprios campos que são gerados na Classe do Parse, com a data de um dos objetos, aí só troquei o ano para que a função retornasse todos os meus objetos. Feito isso, o método <strong>find</strong> é chamado, podendo resultar em sucesso ou erro.</p>\n<p>Caso retorne erro, um alert aparecerá com uma mensagem de “não foi”, e caso a pesquisa resulte em sucesso um laço de repetição será executado, inserindo no HTML do nosso parágrafo <strong>tempNames</strong> as IDs de cada objeto que veio como resultado do Parse.</p>\n<p>Aliás, é muito interessante o tratamento das pesquisas dentro do Parse. Tentei criar arrays fora do método <strong>find</strong>, somente para armazenar os IDs dos objetos, mas não foi possível, todo o tratamento com os objetos que serão retornados com <strong>results</strong> da pesquisa devem ser trabalhados dentro da própria pesquisa.</p>\n<p>Terminamos! Com isso temos uma página HTML que, por JavaScript, salva objetos em um banco de dados na nuvem e retorna todos os seus IDs.</p>\n<p>Você pode encontrar no site do Parse toda a documentação com os códigos que eles possuem para todas as plataformas que eles atendem. Inclusive, dentro daquela página “em branco” que é disponibilizada para download quando criamos nosso projeto, você terá um link para as informações que estarão de acordo com a linguagem que você estiver utilizando.</p>\n<h3 id=\"no-parse\" style=\"position:relative;\">No Parse</h3>\n<p>Feito isso, você pode gerenciar seus aplicativos, suas classes e seus objetos dentro do seu painel no site do Parse. Acessando a aba “Core”, dentro do campo “Data” estarão as suas classes, e dentro das suas classes estarão os objetos com as suas informações.</p>\n<p><del>Deixei um <a href=\"http://glr-tester.ueuo.com/parse/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">exemplo pronto disponível</a>, rodando exatamente tudo isso que expliquei e até com alguns comentários dentro das funções JavaScript para dar uma lembrada do que cada uma faz.</del></p>","timeToRead":6,"frontmatter":{"date":"07/07/2015","path":"/parse-objetos-na-nuvem/","title":"Parse – Objetos na nuvem","subtitle":"Parse, um banco de dados, na nuvem, orientado a objetos.","banner":null}}},"pageContext":{}}}